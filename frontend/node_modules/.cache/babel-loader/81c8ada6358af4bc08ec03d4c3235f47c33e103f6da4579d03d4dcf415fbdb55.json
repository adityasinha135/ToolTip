{"ast":null,"code":"/**\n * Copyright 2017 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { isNode } from '../environment.js';\nimport { assert } from '../util/assert.js';\nimport { Deferred } from '../util/Deferred.js';\nimport { isErrorLike } from '../util/ErrorLike.js';\nimport { debug } from './Debug.js';\nimport { CDPElementHandle } from './ElementHandle.js';\nimport { CDPJSHandle } from './JSHandle.js';\n/**\n * @internal\n */\nexport const debugError = debug('puppeteer:error');\n/**\n * @internal\n */\nexport function createEvaluationError(details) {\n  let name;\n  let message;\n  if (!details.exception) {\n    name = 'Error';\n    message = details.text;\n  } else if ((details.exception.type !== 'object' || details.exception.subtype !== 'error') && !details.exception.objectId) {\n    return valueFromRemoteObject(details.exception);\n  } else {\n    const detail = getErrorDetails(details);\n    name = detail.name;\n    message = detail.message;\n  }\n  const messageHeight = message.split('\\n').length;\n  const error = new Error(message);\n  error.name = name;\n  const stackLines = error.stack.split('\\n');\n  const messageLines = stackLines.splice(0, messageHeight);\n  // The first line is this function which we ignore.\n  stackLines.shift();\n  if (details.stackTrace && stackLines.length < Error.stackTraceLimit) {\n    for (const frame of details.stackTrace.callFrames.reverse()) {\n      if (PuppeteerURL.isPuppeteerURL(frame.url) && frame.url !== PuppeteerURL.INTERNAL_URL) {\n        const url = PuppeteerURL.parse(frame.url);\n        stackLines.unshift(`    at ${frame.functionName || url.functionName} (${url.functionName} at ${url.siteString}, <anonymous>:${frame.lineNumber}:${frame.columnNumber})`);\n      } else {\n        stackLines.push(`    at ${frame.functionName || '<anonymous>'} (${frame.url}:${frame.lineNumber}:${frame.columnNumber})`);\n      }\n      if (stackLines.length >= Error.stackTraceLimit) {\n        break;\n      }\n    }\n  }\n  error.stack = [...messageLines, ...stackLines].join('\\n');\n  return error;\n}\n/**\n * @internal\n */\nexport function createClientError(details) {\n  let name;\n  let message;\n  if (!details.exception) {\n    name = 'Error';\n    message = details.text;\n  } else if ((details.exception.type !== 'object' || details.exception.subtype !== 'error') && !details.exception.objectId) {\n    return valueFromRemoteObject(details.exception);\n  } else {\n    const detail = getErrorDetails(details);\n    name = detail.name;\n    message = detail.message;\n  }\n  const messageHeight = message.split('\\n').length;\n  const error = new Error(message);\n  error.name = name;\n  const stackLines = [];\n  const messageLines = error.stack.split('\\n').splice(0, messageHeight);\n  if (details.stackTrace && stackLines.length < Error.stackTraceLimit) {\n    for (const frame of details.stackTrace.callFrames.reverse()) {\n      stackLines.push(`    at ${frame.functionName || '<anonymous>'} (${frame.url}:${frame.lineNumber}:${frame.columnNumber})`);\n      if (stackLines.length >= Error.stackTraceLimit) {\n        break;\n      }\n    }\n  }\n  error.stack = [...messageLines, ...stackLines].join('\\n');\n  return error;\n}\nconst getErrorDetails = details => {\n  let name = '';\n  let message;\n  const lines = details.exception?.description?.split('\\n    at ') ?? [];\n  const size = Math.min(details.stackTrace?.callFrames.length ?? 0, lines.length - 1);\n  lines.splice(-size, size);\n  if (details.exception?.className) {\n    name = details.exception.className;\n  }\n  message = lines.join('\\n');\n  if (name && message.startsWith(`${name}: `)) {\n    message = message.slice(name.length + 2);\n  }\n  return {\n    message,\n    name\n  };\n};\n/**\n * @internal\n */\nconst SOURCE_URL = Symbol('Source URL for Puppeteer evaluation scripts');\n/**\n * @internal\n */\nexport class PuppeteerURL {\n  static INTERNAL_URL = 'pptr:internal';\n  static fromCallSite(functionName, site) {\n    const url = new PuppeteerURL();\n    url.#functionName = functionName;\n    url.#siteString = site.toString();\n    return url;\n  }\n  static parse = url => {\n    url = url.slice('pptr:'.length);\n    const [functionName = '', siteString = ''] = url.split(';');\n    const puppeteerUrl = new PuppeteerURL();\n    puppeteerUrl.#functionName = functionName;\n    puppeteerUrl.#siteString = decodeURIComponent(siteString);\n    return puppeteerUrl;\n  };\n  static isPuppeteerURL = url => {\n    return url.startsWith('pptr:');\n  };\n  #functionName;\n  #siteString;\n  get functionName() {\n    return this.#functionName;\n  }\n  get siteString() {\n    return this.#siteString;\n  }\n  toString() {\n    return `pptr:${[this.#functionName, encodeURIComponent(this.#siteString)].join(';')}`;\n  }\n}\n/**\n * @internal\n */\nexport const withSourcePuppeteerURLIfNone = (functionName, object) => {\n  if (Object.prototype.hasOwnProperty.call(object, SOURCE_URL)) {\n    return object;\n  }\n  const original = Error.prepareStackTrace;\n  Error.prepareStackTrace = (_, stack) => {\n    // First element is the function. Second element is the caller of this\n    // function. Third element is the caller of the caller of this function\n    // which is precisely what we want.\n    return stack[2];\n  };\n  const site = new Error().stack;\n  Error.prepareStackTrace = original;\n  return Object.assign(object, {\n    [SOURCE_URL]: PuppeteerURL.fromCallSite(functionName, site)\n  });\n};\n/**\n * @internal\n */\nexport const getSourcePuppeteerURLIfAvailable = object => {\n  if (Object.prototype.hasOwnProperty.call(object, SOURCE_URL)) {\n    return object[SOURCE_URL];\n  }\n  return undefined;\n};\n/**\n * @internal\n */\nexport function valueFromRemoteObject(remoteObject) {\n  assert(!remoteObject.objectId, 'Cannot extract value when objectId is given');\n  if (remoteObject.unserializableValue) {\n    if (remoteObject.type === 'bigint') {\n      return BigInt(remoteObject.unserializableValue.replace('n', ''));\n    }\n    switch (remoteObject.unserializableValue) {\n      case '-0':\n        return -0;\n      case 'NaN':\n        return NaN;\n      case 'Infinity':\n        return Infinity;\n      case '-Infinity':\n        return -Infinity;\n      default:\n        throw new Error('Unsupported unserializable value: ' + remoteObject.unserializableValue);\n    }\n  }\n  return remoteObject.value;\n}\n/**\n * @internal\n */\nexport async function releaseObject(client, remoteObject) {\n  if (!remoteObject.objectId) {\n    return;\n  }\n  await client.send('Runtime.releaseObject', {\n    objectId: remoteObject.objectId\n  }).catch(error => {\n    // Exceptions might happen in case of a page been navigated or closed.\n    // Swallow these since they are harmless and we don't leak anything in this case.\n    debugError(error);\n  });\n}\n/**\n * @internal\n */\nexport function addEventListener(emitter, eventName, handler) {\n  emitter.on(eventName, handler);\n  return {\n    emitter,\n    eventName,\n    handler\n  };\n}\n/**\n * @internal\n */\nexport function removeEventListeners(listeners) {\n  for (const listener of listeners) {\n    listener.emitter.removeListener(listener.eventName, listener.handler);\n  }\n  listeners.length = 0;\n}\n/**\n * @internal\n */\nexport const isString = obj => {\n  return typeof obj === 'string' || obj instanceof String;\n};\n/**\n * @internal\n */\nexport const isNumber = obj => {\n  return typeof obj === 'number' || obj instanceof Number;\n};\n/**\n * @internal\n */\nexport const isPlainObject = obj => {\n  return typeof obj === 'object' && obj?.constructor === Object;\n};\n/**\n * @internal\n */\nexport const isRegExp = obj => {\n  return typeof obj === 'object' && obj?.constructor === RegExp;\n};\n/**\n * @internal\n */\nexport const isDate = obj => {\n  return typeof obj === 'object' && obj?.constructor === Date;\n};\n/**\n * @internal\n */\nexport async function waitForEvent(emitter, eventName, predicate, timeout, abortPromise) {\n  const deferred = Deferred.create({\n    message: `Timeout exceeded while waiting for event ${String(eventName)}`,\n    timeout\n  });\n  const listener = addEventListener(emitter, eventName, async event => {\n    if (await predicate(event)) {\n      deferred.resolve(event);\n    }\n  });\n  try {\n    const response = await Deferred.race([deferred, abortPromise]);\n    if (isErrorLike(response)) {\n      throw response;\n    }\n    return response;\n  } catch (error) {\n    throw error;\n  } finally {\n    removeEventListeners([listener]);\n  }\n}\n/**\n * @internal\n */\nexport function createJSHandle(context, remoteObject) {\n  if (remoteObject.subtype === 'node' && context._world) {\n    return new CDPElementHandle(context, remoteObject, context._world.frame());\n  }\n  return new CDPJSHandle(context, remoteObject);\n}\n/**\n * @internal\n */\nexport function evaluationString(fun, ...args) {\n  if (isString(fun)) {\n    assert(args.length === 0, 'Cannot evaluate a string with arguments');\n    return fun;\n  }\n  function serializeArgument(arg) {\n    if (Object.is(arg, undefined)) {\n      return 'undefined';\n    }\n    return JSON.stringify(arg);\n  }\n  return `(${fun})(${args.map(serializeArgument).join(',')})`;\n}\n/**\n * @internal\n */\nexport function addPageBinding(type, name) {\n  // This is the CDP binding.\n  // @ts-expect-error: In a different context.\n  const callCDP = globalThis[name];\n  // We replace the CDP binding with a Puppeteer binding.\n  Object.assign(globalThis, {\n    [name](...args) {\n      // This is the Puppeteer binding.\n      // @ts-expect-error: In a different context.\n      const callPuppeteer = globalThis[name];\n      callPuppeteer.args ??= new Map();\n      callPuppeteer.callbacks ??= new Map();\n      const seq = (callPuppeteer.lastSeq ?? 0) + 1;\n      callPuppeteer.lastSeq = seq;\n      callPuppeteer.args.set(seq, args);\n      callCDP(JSON.stringify({\n        type,\n        name,\n        seq,\n        args,\n        isTrivial: !args.some(value => {\n          return value instanceof Node;\n        })\n      }));\n      return new Promise((resolve, reject) => {\n        callPuppeteer.callbacks.set(seq, {\n          resolve(value) {\n            callPuppeteer.args.delete(seq);\n            resolve(value);\n          },\n          reject(value) {\n            callPuppeteer.args.delete(seq);\n            reject(value);\n          }\n        });\n      });\n    }\n  });\n}\n/**\n * @internal\n */\nexport function pageBindingInitString(type, name) {\n  return evaluationString(addPageBinding, type, name);\n}\n/**\n * @internal\n */\nexport async function waitWithTimeout(promise, taskName, timeout) {\n  const deferred = Deferred.create({\n    message: `waiting for ${taskName} failed: timeout ${timeout}ms exceeded`,\n    timeout\n  });\n  return await Deferred.race([promise, deferred]);\n}\n/**\n * @internal\n */\nlet fs = null;\n/**\n * @internal\n */\nexport async function importFSPromises() {\n  if (!fs) {\n    try {\n      fs = await import('fs/promises');\n    } catch (error) {\n      if (error instanceof TypeError) {\n        throw new Error('Cannot write to a path outside of a Node-like environment.');\n      }\n      throw error;\n    }\n  }\n  return fs;\n}\n/**\n * @internal\n */\nexport async function getReadableAsBuffer(readable, path) {\n  const buffers = [];\n  if (path) {\n    const fs = await importFSPromises();\n    const fileHandle = await fs.open(path, 'w+');\n    try {\n      for await (const chunk of readable) {\n        buffers.push(chunk);\n        await fileHandle.writeFile(chunk);\n      }\n    } finally {\n      await fileHandle.close();\n    }\n  } else {\n    for await (const chunk of readable) {\n      buffers.push(chunk);\n    }\n  }\n  try {\n    return Buffer.concat(buffers);\n  } catch (error) {\n    return null;\n  }\n}\n/**\n * @internal\n */\nexport async function getReadableFromProtocolStream(client, handle) {\n  // TODO: Once Node 18 becomes the lowest supported version, we can migrate to\n  // ReadableStream.\n  if (!isNode) {\n    throw new Error('Cannot create a stream outside of Node.js environment.');\n  }\n  const {\n    Readable\n  } = await import('stream');\n  let eof = false;\n  return new Readable({\n    async read(size) {\n      if (eof) {\n        return;\n      }\n      try {\n        const response = await client.send('IO.read', {\n          handle,\n          size\n        });\n        this.push(response.data, response.base64Encoded ? 'base64' : undefined);\n        if (response.eof) {\n          eof = true;\n          await client.send('IO.close', {\n            handle\n          });\n          this.push(null);\n        }\n      } catch (error) {\n        if (isErrorLike(error)) {\n          this.destroy(error);\n          return;\n        }\n        throw error;\n      }\n    }\n  });\n}\n/**\n * @internal\n */\nexport async function setPageContent(page, content) {\n  // We rely upon the fact that document.open() will reset frame lifecycle with \"init\"\n  // lifecycle event. @see https://crrev.com/608658\n  return page.evaluate(html => {\n    document.open();\n    document.write(html);\n    document.close();\n  }, content);\n}\n/**\n * @internal\n */\nexport function getPageContent() {\n  let content = '';\n  for (const node of document.childNodes) {\n    switch (node) {\n      case document.documentElement:\n        content += document.documentElement.outerHTML;\n        break;\n      default:\n        content += new XMLSerializer().serializeToString(node);\n        break;\n    }\n  }\n  return content;\n}\n/**\n * @internal\n */\nexport function validateDialogType(type) {\n  let dialogType = null;\n  const validDialogTypes = new Set(['alert', 'confirm', 'prompt', 'beforeunload']);\n  if (validDialogTypes.has(type)) {\n    dialogType = type;\n  }\n  assert(dialogType, `Unknown javascript dialog type: ${type}`);\n  return dialogType;\n}","map":{"version":3,"names":["isNode","assert","Deferred","isErrorLike","debug","CDPElementHandle","CDPJSHandle","debugError","createEvaluationError","details","name","message","exception","text","type","subtype","objectId","valueFromRemoteObject","detail","getErrorDetails","messageHeight","split","length","error","Error","stackLines","stack","messageLines","splice","shift","stackTrace","stackTraceLimit","frame","callFrames","reverse","PuppeteerURL","isPuppeteerURL","url","INTERNAL_URL","parse","unshift","functionName","siteString","lineNumber","columnNumber","push","join","createClientError","lines","description","size","Math","min","className","startsWith","slice","SOURCE_URL","Symbol","fromCallSite","site","toString","puppeteerUrl","decodeURIComponent","encodeURIComponent","withSourcePuppeteerURLIfNone","object","Object","prototype","hasOwnProperty","call","original","prepareStackTrace","_","assign","getSourcePuppeteerURLIfAvailable","undefined","remoteObject","unserializableValue","BigInt","replace","NaN","Infinity","value","releaseObject","client","send","catch","addEventListener","emitter","eventName","handler","on","removeEventListeners","listeners","listener","removeListener","isString","obj","String","isNumber","Number","isPlainObject","constructor","isRegExp","RegExp","isDate","Date","waitForEvent","predicate","timeout","abortPromise","deferred","create","event","resolve","response","race","createJSHandle","context","_world","evaluationString","fun","args","serializeArgument","arg","is","JSON","stringify","map","addPageBinding","callCDP","globalThis","callPuppeteer","Map","callbacks","seq","lastSeq","set","isTrivial","some","Node","Promise","reject","delete","pageBindingInitString","waitWithTimeout","promise","taskName","fs","importFSPromises","TypeError","getReadableAsBuffer","readable","path","buffers","fileHandle","open","chunk","writeFile","close","Buffer","concat","getReadableFromProtocolStream","handle","Readable","eof","read","data","base64Encoded","destroy","setPageContent","page","content","evaluate","html","document","write","getPageContent","node","childNodes","documentElement","outerHTML","XMLSerializer","serializeToString","validateDialogType","dialogType","validDialogTypes","Set","has"],"sources":["/home/adityasinha/Desktop/React/topdf/node_modules/puppeteer-core/src/common/util.ts"],"sourcesContent":["/**\n * Copyright 2017 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type {Readable} from 'stream';\n\nimport type {Protocol} from 'devtools-protocol';\n\nimport type {ElementHandle} from '../api/ElementHandle.js';\nimport type {JSHandle} from '../api/JSHandle.js';\nimport {Page} from '../api/Page.js';\nimport {isNode} from '../environment.js';\nimport {assert} from '../util/assert.js';\nimport {Deferred} from '../util/Deferred.js';\nimport {isErrorLike} from '../util/ErrorLike.js';\n\nimport type {CDPSession} from './Connection.js';\nimport {debug} from './Debug.js';\nimport {CDPElementHandle} from './ElementHandle.js';\nimport type {CommonEventEmitter} from './EventEmitter.js';\nimport type {ExecutionContext} from './ExecutionContext.js';\nimport {CDPJSHandle} from './JSHandle.js';\n\n/**\n * @internal\n */\nexport const debugError = debug('puppeteer:error');\n\n/**\n * @internal\n */\nexport function createEvaluationError(\n  details: Protocol.Runtime.ExceptionDetails\n): unknown {\n  let name: string;\n  let message: string;\n  if (!details.exception) {\n    name = 'Error';\n    message = details.text;\n  } else if (\n    (details.exception.type !== 'object' ||\n      details.exception.subtype !== 'error') &&\n    !details.exception.objectId\n  ) {\n    return valueFromRemoteObject(details.exception);\n  } else {\n    const detail = getErrorDetails(details);\n    name = detail.name;\n    message = detail.message;\n  }\n  const messageHeight = message.split('\\n').length;\n  const error = new Error(message);\n  error.name = name;\n  const stackLines = error.stack!.split('\\n');\n  const messageLines = stackLines.splice(0, messageHeight);\n\n  // The first line is this function which we ignore.\n  stackLines.shift();\n  if (details.stackTrace && stackLines.length < Error.stackTraceLimit) {\n    for (const frame of details.stackTrace.callFrames.reverse()) {\n      if (\n        PuppeteerURL.isPuppeteerURL(frame.url) &&\n        frame.url !== PuppeteerURL.INTERNAL_URL\n      ) {\n        const url = PuppeteerURL.parse(frame.url);\n        stackLines.unshift(\n          `    at ${frame.functionName || url.functionName} (${\n            url.functionName\n          } at ${url.siteString}, <anonymous>:${frame.lineNumber}:${\n            frame.columnNumber\n          })`\n        );\n      } else {\n        stackLines.push(\n          `    at ${frame.functionName || '<anonymous>'} (${frame.url}:${\n            frame.lineNumber\n          }:${frame.columnNumber})`\n        );\n      }\n      if (stackLines.length >= Error.stackTraceLimit) {\n        break;\n      }\n    }\n  }\n\n  error.stack = [...messageLines, ...stackLines].join('\\n');\n  return error;\n}\n\n/**\n * @internal\n */\nexport function createClientError(\n  details: Protocol.Runtime.ExceptionDetails\n): unknown {\n  let name: string;\n  let message: string;\n  if (!details.exception) {\n    name = 'Error';\n    message = details.text;\n  } else if (\n    (details.exception.type !== 'object' ||\n      details.exception.subtype !== 'error') &&\n    !details.exception.objectId\n  ) {\n    return valueFromRemoteObject(details.exception);\n  } else {\n    const detail = getErrorDetails(details);\n    name = detail.name;\n    message = detail.message;\n  }\n  const messageHeight = message.split('\\n').length;\n  const error = new Error(message);\n  error.name = name;\n\n  const stackLines = [];\n  const messageLines = error.stack!.split('\\n').splice(0, messageHeight);\n  if (details.stackTrace && stackLines.length < Error.stackTraceLimit) {\n    for (const frame of details.stackTrace.callFrames.reverse()) {\n      stackLines.push(\n        `    at ${frame.functionName || '<anonymous>'} (${frame.url}:${\n          frame.lineNumber\n        }:${frame.columnNumber})`\n      );\n      if (stackLines.length >= Error.stackTraceLimit) {\n        break;\n      }\n    }\n  }\n\n  error.stack = [...messageLines, ...stackLines].join('\\n');\n  return error;\n}\n\nconst getErrorDetails = (details: Protocol.Runtime.ExceptionDetails) => {\n  let name = '';\n  let message: string;\n  const lines = details.exception?.description?.split('\\n    at ') ?? [];\n  const size = Math.min(\n    details.stackTrace?.callFrames.length ?? 0,\n    lines.length - 1\n  );\n  lines.splice(-size, size);\n  if (details.exception?.className) {\n    name = details.exception.className;\n  }\n  message = lines.join('\\n');\n  if (name && message.startsWith(`${name}: `)) {\n    message = message.slice(name.length + 2);\n  }\n  return {message, name};\n};\n\n/**\n * @internal\n */\nconst SOURCE_URL = Symbol('Source URL for Puppeteer evaluation scripts');\n\n/**\n * @internal\n */\nexport class PuppeteerURL {\n  static INTERNAL_URL = 'pptr:internal';\n\n  static fromCallSite(\n    functionName: string,\n    site: NodeJS.CallSite\n  ): PuppeteerURL {\n    const url = new PuppeteerURL();\n    url.#functionName = functionName;\n    url.#siteString = site.toString();\n    return url;\n  }\n\n  static parse = (url: string): PuppeteerURL => {\n    url = url.slice('pptr:'.length);\n    const [functionName = '', siteString = ''] = url.split(';');\n    const puppeteerUrl = new PuppeteerURL();\n    puppeteerUrl.#functionName = functionName;\n    puppeteerUrl.#siteString = decodeURIComponent(siteString);\n    return puppeteerUrl;\n  };\n\n  static isPuppeteerURL = (url: string): boolean => {\n    return url.startsWith('pptr:');\n  };\n\n  #functionName!: string;\n  #siteString!: string;\n\n  get functionName(): string {\n    return this.#functionName;\n  }\n\n  get siteString(): string {\n    return this.#siteString;\n  }\n\n  toString(): string {\n    return `pptr:${[\n      this.#functionName,\n      encodeURIComponent(this.#siteString),\n    ].join(';')}`;\n  }\n}\n\n/**\n * @internal\n */\nexport const withSourcePuppeteerURLIfNone = <T extends NonNullable<unknown>>(\n  functionName: string,\n  object: T\n): T => {\n  if (Object.prototype.hasOwnProperty.call(object, SOURCE_URL)) {\n    return object;\n  }\n  const original = Error.prepareStackTrace;\n  Error.prepareStackTrace = (_, stack) => {\n    // First element is the function. Second element is the caller of this\n    // function. Third element is the caller of the caller of this function\n    // which is precisely what we want.\n    return stack[2];\n  };\n  const site = new Error().stack as unknown as NodeJS.CallSite;\n  Error.prepareStackTrace = original;\n  return Object.assign(object, {\n    [SOURCE_URL]: PuppeteerURL.fromCallSite(functionName, site),\n  });\n};\n\n/**\n * @internal\n */\nexport const getSourcePuppeteerURLIfAvailable = <\n  T extends NonNullable<unknown>,\n>(\n  object: T\n): PuppeteerURL | undefined => {\n  if (Object.prototype.hasOwnProperty.call(object, SOURCE_URL)) {\n    return object[SOURCE_URL as keyof T] as PuppeteerURL;\n  }\n  return undefined;\n};\n\n/**\n * @internal\n */\nexport function valueFromRemoteObject(\n  remoteObject: Protocol.Runtime.RemoteObject\n): any {\n  assert(!remoteObject.objectId, 'Cannot extract value when objectId is given');\n  if (remoteObject.unserializableValue) {\n    if (remoteObject.type === 'bigint') {\n      return BigInt(remoteObject.unserializableValue.replace('n', ''));\n    }\n    switch (remoteObject.unserializableValue) {\n      case '-0':\n        return -0;\n      case 'NaN':\n        return NaN;\n      case 'Infinity':\n        return Infinity;\n      case '-Infinity':\n        return -Infinity;\n      default:\n        throw new Error(\n          'Unsupported unserializable value: ' +\n            remoteObject.unserializableValue\n        );\n    }\n  }\n  return remoteObject.value;\n}\n\n/**\n * @internal\n */\nexport async function releaseObject(\n  client: CDPSession,\n  remoteObject: Protocol.Runtime.RemoteObject\n): Promise<void> {\n  if (!remoteObject.objectId) {\n    return;\n  }\n  await client\n    .send('Runtime.releaseObject', {objectId: remoteObject.objectId})\n    .catch(error => {\n      // Exceptions might happen in case of a page been navigated or closed.\n      // Swallow these since they are harmless and we don't leak anything in this case.\n      debugError(error);\n    });\n}\n\n/**\n * @internal\n */\nexport interface PuppeteerEventListener {\n  emitter: CommonEventEmitter;\n  eventName: string | symbol;\n  handler: (...args: any[]) => void;\n}\n\n/**\n * @internal\n */\nexport function addEventListener(\n  emitter: CommonEventEmitter,\n  eventName: string | symbol,\n  handler: (...args: any[]) => void\n): PuppeteerEventListener {\n  emitter.on(eventName, handler);\n  return {emitter, eventName, handler};\n}\n\n/**\n * @internal\n */\nexport function removeEventListeners(\n  listeners: Array<{\n    emitter: CommonEventEmitter;\n    eventName: string | symbol;\n    handler: (...args: any[]) => void;\n  }>\n): void {\n  for (const listener of listeners) {\n    listener.emitter.removeListener(listener.eventName, listener.handler);\n  }\n  listeners.length = 0;\n}\n\n/**\n * @internal\n */\nexport const isString = (obj: unknown): obj is string => {\n  return typeof obj === 'string' || obj instanceof String;\n};\n\n/**\n * @internal\n */\nexport const isNumber = (obj: unknown): obj is number => {\n  return typeof obj === 'number' || obj instanceof Number;\n};\n\n/**\n * @internal\n */\nexport const isPlainObject = (obj: unknown): obj is Record<any, unknown> => {\n  return typeof obj === 'object' && obj?.constructor === Object;\n};\n\n/**\n * @internal\n */\nexport const isRegExp = (obj: unknown): obj is RegExp => {\n  return typeof obj === 'object' && obj?.constructor === RegExp;\n};\n\n/**\n * @internal\n */\nexport const isDate = (obj: unknown): obj is Date => {\n  return typeof obj === 'object' && obj?.constructor === Date;\n};\n\n/**\n * @internal\n */\nexport async function waitForEvent<T>(\n  emitter: CommonEventEmitter,\n  eventName: string | symbol,\n  predicate: (event: T) => Promise<boolean> | boolean,\n  timeout: number,\n  abortPromise: Promise<Error> | Deferred<Error>\n): Promise<T> {\n  const deferred = Deferred.create<T>({\n    message: `Timeout exceeded while waiting for event ${String(eventName)}`,\n    timeout,\n  });\n  const listener = addEventListener(emitter, eventName, async event => {\n    if (await predicate(event)) {\n      deferred.resolve(event);\n    }\n  });\n\n  try {\n    const response = await Deferred.race<T | Error>([deferred, abortPromise]);\n    if (isErrorLike(response)) {\n      throw response;\n    }\n\n    return response;\n  } catch (error) {\n    throw error;\n  } finally {\n    removeEventListeners([listener]);\n  }\n}\n\n/**\n * @internal\n */\nexport function createJSHandle(\n  context: ExecutionContext,\n  remoteObject: Protocol.Runtime.RemoteObject\n): JSHandle | ElementHandle<Node> {\n  if (remoteObject.subtype === 'node' && context._world) {\n    return new CDPElementHandle(context, remoteObject, context._world.frame());\n  }\n  return new CDPJSHandle(context, remoteObject);\n}\n\n/**\n * @internal\n */\nexport function evaluationString(\n  fun: Function | string,\n  ...args: unknown[]\n): string {\n  if (isString(fun)) {\n    assert(args.length === 0, 'Cannot evaluate a string with arguments');\n    return fun;\n  }\n\n  function serializeArgument(arg: unknown): string {\n    if (Object.is(arg, undefined)) {\n      return 'undefined';\n    }\n    return JSON.stringify(arg);\n  }\n\n  return `(${fun})(${args.map(serializeArgument).join(',')})`;\n}\n\n/**\n * @internal\n */\nexport function addPageBinding(type: string, name: string): void {\n  // This is the CDP binding.\n  // @ts-expect-error: In a different context.\n  const callCDP = globalThis[name];\n\n  // We replace the CDP binding with a Puppeteer binding.\n  Object.assign(globalThis, {\n    [name](...args: unknown[]): Promise<unknown> {\n      // This is the Puppeteer binding.\n      // @ts-expect-error: In a different context.\n      const callPuppeteer = globalThis[name];\n      callPuppeteer.args ??= new Map();\n      callPuppeteer.callbacks ??= new Map();\n\n      const seq = (callPuppeteer.lastSeq ?? 0) + 1;\n      callPuppeteer.lastSeq = seq;\n      callPuppeteer.args.set(seq, args);\n\n      callCDP(\n        JSON.stringify({\n          type,\n          name,\n          seq,\n          args,\n          isTrivial: !args.some(value => {\n            return value instanceof Node;\n          }),\n        })\n      );\n\n      return new Promise((resolve, reject) => {\n        callPuppeteer.callbacks.set(seq, {\n          resolve(value: unknown) {\n            callPuppeteer.args.delete(seq);\n            resolve(value);\n          },\n          reject(value?: unknown) {\n            callPuppeteer.args.delete(seq);\n            reject(value);\n          },\n        });\n      });\n    },\n  });\n}\n\n/**\n * @internal\n */\nexport function pageBindingInitString(type: string, name: string): string {\n  return evaluationString(addPageBinding, type, name);\n}\n\n/**\n * @internal\n */\nexport async function waitWithTimeout<T>(\n  promise: Promise<T>,\n  taskName: string,\n  timeout: number\n): Promise<T> {\n  const deferred = Deferred.create<never>({\n    message: `waiting for ${taskName} failed: timeout ${timeout}ms exceeded`,\n    timeout,\n  });\n\n  return await Deferred.race([promise, deferred]);\n}\n\n/**\n * @internal\n */\nlet fs: typeof import('fs/promises') | null = null;\n/**\n * @internal\n */\nexport async function importFSPromises(): Promise<\n  typeof import('fs/promises')\n> {\n  if (!fs) {\n    try {\n      fs = await import('fs/promises');\n    } catch (error) {\n      if (error instanceof TypeError) {\n        throw new Error(\n          'Cannot write to a path outside of a Node-like environment.'\n        );\n      }\n      throw error;\n    }\n  }\n  return fs;\n}\n\n/**\n * @internal\n */\nexport async function getReadableAsBuffer(\n  readable: Readable,\n  path?: string\n): Promise<Buffer | null> {\n  const buffers = [];\n  if (path) {\n    const fs = await importFSPromises();\n    const fileHandle = await fs.open(path, 'w+');\n    try {\n      for await (const chunk of readable) {\n        buffers.push(chunk);\n        await fileHandle.writeFile(chunk);\n      }\n    } finally {\n      await fileHandle.close();\n    }\n  } else {\n    for await (const chunk of readable) {\n      buffers.push(chunk);\n    }\n  }\n  try {\n    return Buffer.concat(buffers);\n  } catch (error) {\n    return null;\n  }\n}\n\n/**\n * @internal\n */\nexport async function getReadableFromProtocolStream(\n  client: CDPSession,\n  handle: string\n): Promise<Readable> {\n  // TODO: Once Node 18 becomes the lowest supported version, we can migrate to\n  // ReadableStream.\n  if (!isNode) {\n    throw new Error('Cannot create a stream outside of Node.js environment.');\n  }\n\n  const {Readable} = await import('stream');\n\n  let eof = false;\n  return new Readable({\n    async read(size: number) {\n      if (eof) {\n        return;\n      }\n\n      try {\n        const response = await client.send('IO.read', {handle, size});\n        this.push(response.data, response.base64Encoded ? 'base64' : undefined);\n        if (response.eof) {\n          eof = true;\n          await client.send('IO.close', {handle});\n          this.push(null);\n        }\n      } catch (error) {\n        if (isErrorLike(error)) {\n          this.destroy(error);\n          return;\n        }\n        throw error;\n      }\n    },\n  });\n}\n\n/**\n * @internal\n */\nexport async function setPageContent(\n  page: Pick<Page, 'evaluate'>,\n  content: string\n): Promise<void> {\n  // We rely upon the fact that document.open() will reset frame lifecycle with \"init\"\n  // lifecycle event. @see https://crrev.com/608658\n  return page.evaluate(html => {\n    document.open();\n    document.write(html);\n    document.close();\n  }, content);\n}\n\n/**\n * @internal\n */\nexport function getPageContent(): string {\n  let content = '';\n  for (const node of document.childNodes) {\n    switch (node) {\n      case document.documentElement:\n        content += document.documentElement.outerHTML;\n        break;\n      default:\n        content += new XMLSerializer().serializeToString(node);\n        break;\n    }\n  }\n\n  return content;\n}\n\n/**\n * @internal\n */\nexport function validateDialogType(\n  type: string\n): 'alert' | 'confirm' | 'prompt' | 'beforeunload' {\n  let dialogType = null;\n  const validDialogTypes = new Set([\n    'alert',\n    'confirm',\n    'prompt',\n    'beforeunload',\n  ]);\n\n  if (validDialogTypes.has(type)) {\n    dialogType = type;\n  }\n  assert(dialogType, `Unknown javascript dialog type: ${type}`);\n  return dialogType as 'alert' | 'confirm' | 'prompt' | 'beforeunload';\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}