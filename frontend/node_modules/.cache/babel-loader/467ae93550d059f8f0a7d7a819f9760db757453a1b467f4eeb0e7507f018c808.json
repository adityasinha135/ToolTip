{"ast":null,"code":"/**\n * Copyright 2023 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { from, map, mergeMap, throwIfEmpty } from '../../../third_party/rxjs/rxjs.js';\nimport { DelegatedLocator } from './DelegatedLocator.js';\n/**\n * @internal\n */\nexport class FilteredLocator extends DelegatedLocator {\n  #predicate;\n  constructor(base, predicate) {\n    super(base);\n    this.#predicate = predicate;\n  }\n  _clone() {\n    return new FilteredLocator(this.delegate.clone(), this.#predicate).copyOptions(this);\n  }\n  _wait(options) {\n    return this.delegate._wait(options).pipe(mergeMap(handle => {\n      return from(handle.frame.waitForFunction(this.#predicate, {\n        signal: options?.signal,\n        timeout: this._timeout\n      }, handle)).pipe(map(() => {\n        // SAFETY: It passed the predicate, so this is correct.\n        return handle;\n      }));\n    }), throwIfEmpty());\n  }\n}","map":{"version":3,"names":["from","map","mergeMap","throwIfEmpty","DelegatedLocator","FilteredLocator","predicate","constructor","base","_clone","delegate","clone","copyOptions","_wait","options","pipe","handle","frame","waitForFunction","signal","timeout","_timeout"],"sources":["/home/adityasinha/Desktop/React/topdf/node_modules/puppeteer-core/src/api/locators/FilteredLocator.ts"],"sourcesContent":["/**\n * Copyright 2023 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Observable,\n  from,\n  map,\n  mergeMap,\n  throwIfEmpty,\n} from '../../../third_party/rxjs/rxjs.js';\nimport {Awaitable, HandleFor} from '../../common/common.js';\nimport {ElementHandle} from '../ElementHandle.js';\n\nimport {DelegatedLocator} from './DelegatedLocator.js';\nimport {ActionOptions, Locator} from './locators.js';\n\n/**\n * @public\n */\nexport type Predicate<From, To extends From = From> =\n  | ((value: From) => value is To)\n  | ((value: From) => Awaitable<boolean>);\n\n/**\n * @internal\n */\nexport class FilteredLocator<From, To extends From> extends DelegatedLocator<\n  From,\n  To\n> {\n  #predicate: Predicate<From, To>;\n\n  constructor(base: Locator<From>, predicate: Predicate<From, To>) {\n    super(base);\n    this.#predicate = predicate;\n  }\n\n  override _clone(): FilteredLocator<From, To> {\n    return new FilteredLocator(\n      this.delegate.clone(),\n      this.#predicate\n    ).copyOptions(this);\n  }\n\n  override _wait(options?: Readonly<ActionOptions>): Observable<HandleFor<To>> {\n    return this.delegate._wait(options).pipe(\n      mergeMap(handle => {\n        return from(\n          (handle as ElementHandle<Node>).frame.waitForFunction(\n            this.#predicate,\n            {signal: options?.signal, timeout: this._timeout},\n            handle\n          )\n        ).pipe(\n          map(() => {\n            // SAFETY: It passed the predicate, so this is correct.\n            return handle as HandleFor<To>;\n          })\n        );\n      }),\n      throwIfEmpty()\n    );\n  }\n}\n"],"mappings":"AAAA;;;;;;;;;;;;;;;AAgBA,SAEEA,IAAI,EACJC,GAAG,EACHC,QAAQ,EACRC,YAAY,QACP,mCAAmC;AAI1C,SAAQC,gBAAgB,QAAO,uBAAuB;AAUtD;;;AAGA,OAAM,MAAOC,eAAuC,SAAQD,gBAG3D;EACC,CAAAE,SAAU;EAEVC,YAAYC,IAAmB,EAAEF,SAA8B;IAC7D,KAAK,CAACE,IAAI,CAAC;IACX,IAAI,CAAC,CAAAF,SAAU,GAAGA,SAAS;EAC7B;EAESG,MAAMA,CAAA;IACb,OAAO,IAAIJ,eAAe,CACxB,IAAI,CAACK,QAAQ,CAACC,KAAK,EAAE,EACrB,IAAI,CAAC,CAAAL,SAAU,CAChB,CAACM,WAAW,CAAC,IAAI,CAAC;EACrB;EAESC,KAAKA,CAACC,OAAiC;IAC9C,OAAO,IAAI,CAACJ,QAAQ,CAACG,KAAK,CAACC,OAAO,CAAC,CAACC,IAAI,CACtCb,QAAQ,CAACc,MAAM,IAAG;MAChB,OAAOhB,IAAI,CACRgB,MAA8B,CAACC,KAAK,CAACC,eAAe,CACnD,IAAI,CAAC,CAAAZ,SAAU,EACf;QAACa,MAAM,EAAEL,OAAO,EAAEK,MAAM;QAAEC,OAAO,EAAE,IAAI,CAACC;MAAQ,CAAC,EACjDL,MAAM,CACP,CACF,CAACD,IAAI,CACJd,GAAG,CAAC,MAAK;QACP;QACA,OAAOe,MAAuB;MAChC,CAAC,CAAC,CACH;IACH,CAAC,CAAC,EACFb,YAAY,EAAE,CACf;EACH"},"metadata":{},"sourceType":"module","externalDependencies":[]}